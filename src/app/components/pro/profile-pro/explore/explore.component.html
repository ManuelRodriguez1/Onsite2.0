<div class="containerMin">

    <div class="container shadow containerNoExplore" *ngIf="projects.length==0">
        <div class="row">
            <div class="col-6">
                <div>
                    <h3>Projects under construction </h3>
                    <p class="mt-53 ">
                        There are no projects available for you at this time. Please try again later. In the meantime, please make sure your profile is completed so you can apply immediately once a project is posted.
                    </p>
                    <button class="blueBtn medium mt-47 " (click)="profile1()">Back to profile</button>

                </div>


            </div>
            <div class="col-6"> <img class="noExplore" src="../../../../../assets/imagenes/ProjectsUnderConstruction_Illo.png"></div>

        </div>
    </div>
    <div class="container shadow" *ngIf="select == 0 && projects.length!=0">
        <div class="skillsCheckContainer" [ngStyle]="{'display': skf ? 'block' : 'none'}">
            <div class="column col1">
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Concrete')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Concrete</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Decorator')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Decorator</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Drywall')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Drywall</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Electrical')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Electrical</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Excavation')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Excavation</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Flooring')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Flooring</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'General Labor')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">General Labor</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Insulation')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Insulation</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Interior Finishing Carpentry')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Interior Finishing<br> Carpentry</span>
                    </label>
                </div>
            </div>
            <div class="column col2">
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Iron Worker')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Iron Worker</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Landscaper')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Landscaper</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Mason')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Mason</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Plastering')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Plastering</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Plumbing')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Plumbing</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Roofer')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Roofer</span>
                    </label>
                </div>
                <div class="item">
                    <label class="checkbox">
                        <input class="checkbox__input" id="loginCheckbox" type="checkbox" (change)="sFilter($event, 'Waterproof Installation')">
                        <span class="checkbox__checkmark"></span>
                        <span class="remember_me">Waterproof<br> Installation</span>
                    </label>
                </div>
            </div>
            <button class="done" (click)="skf = false">Done</button>
        </div>
        <div class="divcol mt-44 ml-48">
            <form action="">
                <div class="row fields">
                    <div class="input-group">
                        <div class="searchGray absoluteSearch"></div>
                        <input type="text" class="form-control col-sm-3 borderGray" placeholder="Search for projects" [(ngModel)]="searchProject" name="searchProject">
                        <!-- <div class="normalText fl ml-48">
                            <p><strong>{{ projects2.length }} Results</strong></p>
                        </div> -->
                        <!-- <div class="normalText fr ml-137">
                            <p>Sort by: <span style="cursor: pointer;" class="orange hoverOrange" (click)="filterChange()"><strong *ngIf="changeFilter">Latest</strong>
                                    <strong *ngIf="!changeFilter">First</strong></span></p>
                            <div class="arrowDownGray fr mt-mr" (click)="filterChange()"></div>
                        </div> -->
                        <button class="filterBtn ml-12 fl" (click)="skf = !skf">Skills</button>
                        <button class="filterBtn ml-12 fl">Distance</button>
                        <button class="filterBtn w-250 ml-12 fl"><span class="gray">Sort by:</span> Newest - Oldest</button>
                        <button class="orangeBtn small ml-12 fl" (click)="filter(); skf = false">Refresh</button>
                    </div>
                </div>
            </form>
        </div>
        <hr class="hr mt-47">
        <div class="project">


            <div class="lds-roller" *ngIf="loading == true">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <ng-container *ngFor="let p of projects | search: searchProject | order: changeFilter | skills: sf; let i = index">
                <div class="projects row" (click)="sendInfo(p)" *ngIf="(i+1) >= start && (i+1) <= end">
                    <div class="col-sm-6 ml-48">
                        <p class="mt-47"><span class="title2">Project:</span> {{ p.projectname }}</p>
                        <p class="mt-20 h-17">{{ p.description }}</p>
                        <p class="mt-20">Status: {{ p.statusname }}</p>
                        <div class="mt-49 mb-42">
                            <div class="iconSkills fl mt-mr2"></div>
                            <p class="purple normalText"><span *ngFor="let s of p.skills">{{ s }}<label>,</label>&nbsp;</span></p>
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="map mt-47">
                            <agm-map [latitude]="p.latitude" [longitude]="p.longitude"></agm-map>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
        <div class="pagination">
            <div class="buttonsPag">
                <div class="firstPag" [class.clickP]="start > 1" (click)="firstPage()">
                    <span></span>
                </div>
                <div class="prevPag" [class.clickP]="start > 1" (click)="prevPage()">
                    <span></span>
                </div>
                <div class="numbers clickP" [class.bgP]="start >= ((page*cantResul)-cantResul) && end <= (page*cantResul) " (click)="changePag(page)" *ngFor="let page of pages">
                    <p>{{ page }}</p>
                </div>
                <div class="nextPag" (click)="nextPage()" [class.clickP]="end < projects2.length">
                    <span></span>
                </div>
                <div class="lastPag" [class.clickP]="end < projects2.length" (click)="lastPage()">
                    <span></span>
                </div>
            </div>
        </div>
    </div>

    <div class="container shadow otherContainer" *ngIf="select == 1">
        <div class="row fields mt-47 h-326">
            <div class="col-sm ml-48">
                <p><span class="title2">Project:</span> {{infoProject.projectname}}.</p>
                <p class="mt-12">Status: {{infoProject.statusname}}</p>
                <p class="mt-44">{{infoProject.description}}</p>
            </div>
            <div class="col-sm mr-48 btnMobile" *ngIf="this.emailV">
                <button class="blueBtn small fr" (click)="apply()" *ngIf="buttonApply; else aplicado"><span>Apply</span></button>
                <ng-template #aplicado>
                    <button class="blueBtn small fr disabled grayBtn" disabled><span>Applied</span></button>
                </ng-template>
            </div>
        </div>
        <hr class="hr">
        <div class="row fields">
            <div class="col-sm ml-48">
                <div class="title2">
                    <p>Hirer</p>
                </div>
                <div class="fields flex">
                    <div class="profile mini" [ngStyle]="{'background-image' : 'url('+infoProject.photo+')'}"></div>
                    <div class="ml-14">
                        <p class="title2 mt-0">{{infoProject.name}}</p>
                        <p class="mt-8"><span class="verify fl mr-6"></span>Verified user</p>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hr mt-33">
        <div class="row fields">
            <div class="col-sm ml-48">
                <div class="title2">
                    <p>Skills</p>
                </div>
                <div class="mt-20" style="overflow: hidden;">
                    <div class="skillsel onlySkill" *ngFor="let si of infoProject.skills">
                        <p>{{si}}</p>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hr mt-38">
        <div class="row fields">
            <div class="col-sm ml-48">
                <div class="title2">
                    <p>Location</p>
                </div>
                <p class="mt-17"><span class="locationIcon fl mr-8 mt--3"></span>{{infoProject.location}}</p>
            </div>
        </div>
        <hr class="hr mt-33">
        <div class="row fields">
            <div class="col-sm ml-48">
                <div class="title2">
                    <p>Location Map</p>
                </div>
                <div class="mapBig mt-20 mb-57">
                    <agm-map [latitude]="infoProject.latitude" [longitude]="infoProject.longitude"></agm-map>
                </div>
            </div>
        </div>
        <button class="blueBtn small fr btnDesktop" (click)="apply()" *ngIf="buttonApply; else aplicado"><span>Apply</span></button>
        <ng-template #aplicado>
            <button class="blueBtn small fr disabled grayBtn btnDesktop" disabled><span>Applied</span></button>
        </ng-template>
    </div>

    <div class="textv mr-97">
        <p>Explore</p>
    </div>

    <div class="modal" [class.showModal]="modal == 1">
        <div class="message">
            <div class="title mt-44">
                <p>You have successfully <br>applied to this offer</p>
            </div>
            <p class="mt-30 smallText">The hirer will reach out to you soon in the Messages <br>section to negotiate and agree on payment terms.</p>
            <a href="/Dashboard">
                <button class="blueBtn large mt-30 w360">Back to dashboard</button>
            </a>
            <span class="mt-12 mb-12 orLines">or</span>
            <button class="blueBtn large mb-45 w360" (click)=backExplore()>Back to explore</button>
        </div>
    </div>
</div>